# Cloud Firestore ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ å›³

```
Cloud Firestore
â”‚
â”œâ”€â”€ ğŸ“ event_layouts
â”‚   â”‚   (å±•ç¤ºä¼šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "event_2025_default", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ eventName: string              // å±•ç¤ºä¼šå
â”‚       â”œâ”€â”€ eventDate: string              // é–‹å‚¬æ—¥
â”‚       â”œâ”€â”€ mapWidth: int                  // ãƒãƒƒãƒ—ã®å¹…
â”‚       â”œâ”€â”€ mapHeight: int                 // ãƒãƒƒãƒ—ã®é«˜ã•
â”‚       â”œâ”€â”€ backgroundColor: string        // èƒŒæ™¯è‰²ï¼ˆ16é€²æ•°ï¼‰
â”‚       â”œâ”€â”€ gridSize: int                  // ã‚°ãƒªãƒƒãƒ‰ã‚µã‚¤ã‚º
â”‚       â”œâ”€â”€ active: bool                   // ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‹ã©ã†ã‹
â”‚       â””â”€â”€ createdAt: Timestamp           // ä½œæˆæ—¥æ™‚
â”‚
â”œâ”€â”€ ğŸ“ map_elements
â”‚   â”‚   (ãƒãƒƒãƒ—è¦ç´ ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "element_0", "element_1", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ eventId: string                // æ‰€å±ã™ã‚‹å±•ç¤ºä¼šID
â”‚       â”œâ”€â”€ type: string                   // "background", "wall", "corridor", "entrance"
â”‚       â”œâ”€â”€ shape: string                  // "rect", "circle", "line"
â”‚       â”œâ”€â”€ x: int                         // Xåº§æ¨™
â”‚       â”œâ”€â”€ y: int                         // Yåº§æ¨™
â”‚       â”œâ”€â”€ width: int                     // å¹…
â”‚       â”œâ”€â”€ height: int                    // é«˜ã•
â”‚       â”œâ”€â”€ color: string                  // è‰²ï¼ˆ16é€²æ•°ï¼‰
â”‚       â”œâ”€â”€ strokeWidth: int (optional)    // ç·šã®å¤ªã•
â”‚       â”œâ”€â”€ filled: bool (optional)        // å¡—ã‚Šã¤ã¶ã—ã‹ã©ã†ã‹
â”‚       â”œâ”€â”€ label: string                  // ãƒ©ãƒ™ãƒ«
â”‚       â””â”€â”€ zIndex: int                    // è¡¨ç¤ºé †åº
â”‚
â”œâ”€â”€ ğŸ“ beacon_counts
â”‚   â”‚   (æ—¥ä»˜ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "yyyy-MM-dd")
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ devices (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
â”‚       â”‚   (ãƒ‡ãƒã‚¤ã‚¹åã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "FSC-BP104D", "Booth-A2", etc.)
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚           â”œâ”€â”€ count: int                    // ç´¯è¨ˆè¨ªå•æ•°
â”‚           â”œâ”€â”€ deviceName: string             // ãƒ‡ãƒã‚¤ã‚¹å
â”‚           â”œâ”€â”€ firstSeen: Timestamp           // åˆå›æ¤œå‡ºæ™‚åˆ»
â”‚           â”œâ”€â”€ lastSeen: Timestamp            // æœ€çµ‚æ¤œå‡ºæ™‚åˆ»
â”‚           â”œâ”€â”€ visitors: Array<Map>           // æ¥å ´è€…ãƒ‡ãƒ¼ã‚¿é…åˆ—
â”‚           â”‚   â””â”€â”€ visitor ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:
â”‚           â”‚       â”œâ”€â”€ userId: string
â”‚           â”‚       â”œâ”€â”€ timestamp: Timestamp
â”‚           â”‚       â”œâ”€â”€ lastDetectedAt: Timestamp
â”‚           â”‚       â”œâ”€â”€ eventType: string      // "visit" or "long_stay"
â”‚           â”‚       â”œâ”€â”€ age: int
â”‚           â”‚       â”œâ”€â”€ gender: string
â”‚           â”‚       â”œâ”€â”€ job: string
â”‚           â”‚       â”œâ”€â”€ company: string
â”‚           â”‚       â”œâ”€â”€ position: string
â”‚           â”‚       â”œâ”€â”€ industry: string
â”‚           â”‚       â”œâ”€â”€ eventSource: string
â”‚           â”‚       â””â”€â”€ interests: Array<string>
â”‚           â””â”€â”€ isTestData: bool              // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ©ã‚°
â”‚
â”œâ”€â”€ ğŸ“ visitors
â”‚   â”‚   (æ¥å ´è€…IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "visitor_xxxxx")
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ userId: string                     // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
â”‚       â”œâ”€â”€ displayName: string                // è¡¨ç¤ºå
â”‚       â”œâ”€â”€ email: string                     // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
â”‚       â”œâ”€â”€ age: int                          // å¹´é½¢
â”‚       â”œâ”€â”€ gender: string                     // æ€§åˆ¥ ("ç”·æ€§", "å¥³æ€§", "ãã®ä»–")
â”‚       â”œâ”€â”€ job: string                       // è·æ¥­
â”‚       â”œâ”€â”€ company: string                   // æ‰€å±ä¼æ¥­
â”‚       â”œâ”€â”€ position: string                   // å½¹è·
â”‚       â”œâ”€â”€ industry: string                  // æ¥­ç¨®
â”‚       â”œâ”€â”€ eventSource: string               // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±æº
â”‚       â”œâ”€â”€ interests: Array<string>           // èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡
â”‚       â”œâ”€â”€ createdAt: Timestamp               // ä½œæˆæ—¥æ™‚
â”‚       â””â”€â”€ isTestData: bool                  // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ©ã‚°
â”‚
â”œâ”€â”€ ğŸ“ booths (ã¾ãŸã¯ booth_locations)
â”‚   â”‚   (ãƒ–ãƒ¼ã‚¹IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "FSC-BP104D", "Booth-A2", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ id: string                        // ãƒ–ãƒ¼ã‚¹ID
â”‚       â”œâ”€â”€ displayName: string               // è¡¨ç¤ºå
â”‚       â”œâ”€â”€ company: string                   // ä¼æ¥­å
â”‚       â”œâ”€â”€ description: string               // èª¬æ˜
â”‚       â”œâ”€â”€ products: Array<string>           // è£½å“ãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ contactEmail: string              // é€£çµ¡å…ˆãƒ¡ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ website: string                   // Webã‚µã‚¤ãƒˆ
â”‚       â”œâ”€â”€ features: Array<string>           // ç‰¹å¾´ãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ type: string                      // ã‚¿ã‚¤ãƒ— ("booth", "entrance", etc.)
â”‚       â”œâ”€â”€ x: int                            // Xåº§æ¨™
â”‚       â”œâ”€â”€ y: int                            // Yåº§æ¨™
â”‚       â”œâ”€â”€ name: string                      // ãƒ–ãƒ¼ã‚¹å
â”‚       â”œâ”€â”€ width: int                        // ãƒ–ãƒ¼ã‚¹ã®å¹…ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30ï¼‰
â”‚       â”œâ”€â”€ height: int                       // ãƒ–ãƒ¼ã‚¹ã®é«˜ã•ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30ï¼‰
â”‚       â””â”€â”€ shape: string                     // ãƒ–ãƒ¼ã‚¹ã®å½¢çŠ¶ ("circle", "rect", "square")
â”‚
â”œâ”€â”€ ğŸ“ booth_reservations
â”‚   â”‚   (äºˆç´„IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "userId_boothId")
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ userId: string                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
â”‚       â”œâ”€â”€ boothId: string                   // ãƒ–ãƒ¼ã‚¹ID
â”‚       â”œâ”€â”€ displayName: string               // è¡¨ç¤ºå
â”‚       â”œâ”€â”€ email: string                     // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
â”‚       â”œâ”€â”€ age: int                          // å¹´é½¢
â”‚       â”œâ”€â”€ gender: string                    // æ€§åˆ¥
â”‚       â”œâ”€â”€ job: string                      // è·æ¥­
â”‚       â”œâ”€â”€ eventSource: string              // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±æº
â”‚       â”œâ”€â”€ interests: Array<string>          // èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡
â”‚       â”œâ”€â”€ reservedAt: Timestamp            // äºˆç´„æ—¥æ™‚
â”‚       â””â”€â”€ hasVisitorInfo: bool             // æ¥å ´è€…æƒ…å ±ã®æœ‰ç„¡
â”‚
â”œâ”€â”€ ğŸ“ exhibitors (èªè¨¼ç”¨)
â”‚   â”‚   (å‡ºå±•è€…IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "exhibitor001", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ id: string                       // å‡ºå±•è€…ID
â”‚       â”œâ”€â”€ name: string                     // åå‰
â”‚       â”œâ”€â”€ password: string                  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
â”‚       â”œâ”€â”€ company: string                  // ä¼æ¥­å
â”‚       â””â”€â”€ createdAt: Timestamp             // ä½œæˆæ—¥æ™‚
â”‚
â”œâ”€â”€ ğŸ“ organizers (èªè¨¼ç”¨)
â”‚   â”‚   (ä¸»å‚¬è€…IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "organizer001", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ id: string                       // ä¸»å‚¬è€…ID
â”‚       â”œâ”€â”€ name: string                     // åå‰
â”‚       â”œâ”€â”€ password: string                 // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
â”‚       â”œâ”€â”€ role: string                     // å½¹å‰² ("admin", "manager")
â”‚       â””â”€â”€ createdAt: Timestamp             // ä½œæˆæ—¥æ™‚
â”‚
â”œâ”€â”€ ğŸ“ staff (èªè¨¼ç”¨)
â”‚   â”‚   (ã‚¹ã‚¿ãƒƒãƒ•IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: "staff001", etc.)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
â”‚       â”œâ”€â”€ id: string                       // ã‚¹ã‚¿ãƒƒãƒ•ID
â”‚       â”œâ”€â”€ name: string                     // åå‰
â”‚       â”œâ”€â”€ password: string                 // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
â”‚       â”œâ”€â”€ department: string               // éƒ¨ç½²
â”‚       â””â”€â”€ createdAt: Timestamp             // ä½œæˆæ—¥æ™‚
â”‚
â””â”€â”€ ğŸ“ test_users (é–‹ç™ºç”¨)
    â”‚   (ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼IDã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)
    â”‚
    â””â”€â”€ ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: (ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿)
```

---

## ğŸ“‹ å„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®è©³ç´°èª¬æ˜

### 1. event_layouts (å±•ç¤ºä¼šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š)

**ç›®çš„**: å±•ç¤ºä¼šã”ã¨ã®ä¼šå ´ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `event_layouts`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: ã‚¤ãƒ™ãƒ³ãƒˆè­˜åˆ¥å­ (`"event_2025_default"`, `"event_2025_spring"` ãªã©)

**ä½¿ç”¨ä¾‹**:
```
event_layouts/
  â””â”€â”€ event_2025_default/
      â”œâ”€â”€ eventName: "2025å¹´ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå±•ç¤ºä¼š"
      â”œâ”€â”€ eventDate: "2025-01-01"
      â”œâ”€â”€ mapWidth: 700
      â”œâ”€â”€ mapHeight: 500
      â”œâ”€â”€ backgroundColor: "#FAFAFA"
      â”œâ”€â”€ gridSize: 10
      â”œâ”€â”€ active: true
      â””â”€â”€ createdAt: Timestamp
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `active`: ç¾åœ¨ä½¿ç”¨ä¸­ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç¤ºã™ï¼ˆ1ã¤ã®ã¿trueã«ã™ã‚‹ï¼‰
- `mapWidth`, `mapHeight`: ãƒãƒƒãƒ—ã®æç”»é ˜åŸŸã‚µã‚¤ã‚º
- `backgroundColor`: èƒŒæ™¯è‰²ï¼ˆ16é€²æ•°ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ï¼‰

---

### 2. map_elements (ãƒãƒƒãƒ—è¦ç´ )

**ç›®çš„**: ä¼šå ´ãƒãƒƒãƒ—ã®å„è¦ç´ ï¼ˆé€šè·¯ã€å£ã€ã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ãªã©ï¼‰ã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `map_elements`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: è¦ç´ è­˜åˆ¥å­ (`"element_0"`, `"element_1"` ãªã©)

**ä½¿ç”¨ä¾‹**:
```
map_elements/
  â””â”€â”€ element_0/
      â”œâ”€â”€ eventId: "event_2025_default"
      â”œâ”€â”€ type: "corridor"
      â”œâ”€â”€ shape: "rect"
      â”œâ”€â”€ x: 20
      â”œâ”€â”€ y: 80
      â”œâ”€â”€ width: 660
      â”œâ”€â”€ height: 30
      â”œâ”€â”€ color: "#EEEEEE"
      â”œâ”€â”€ label: "æ¨ªé€šè·¯1"
      â””â”€â”€ zIndex: 1
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `eventId`: ã©ã®å±•ç¤ºä¼šã«å±ã™ã‚‹ã‹
- `type`: è¦ç´ ã®ç¨®é¡ï¼ˆ`background`, `wall`, `corridor`, `entrance`ï¼‰
- `shape`: å›³å½¢ã®ç¨®é¡ï¼ˆ`rect`, `circle`, `line`ï¼‰
- `zIndex`: æç”»é †åºï¼ˆå°ã•ã„å€¤ãŒå…ˆã«æç”»ã•ã‚Œã‚‹ï¼‰
- `filled`: å¡—ã‚Šã¤ã¶ã—ã‹è¼ªéƒ­ã®ã¿ã‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
âœ… å±•ç¤ºä¼šã”ã¨ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¤‰æ›´å¯èƒ½  
âœ… ã‚³ãƒ¼ãƒ‰å¤‰æ›´ãªã—ã§ãƒãƒƒãƒ—ã‚’æ›´æ–°  
âœ… è¤‡æ•°ã®å±•ç¤ºä¼šè¨­å®šã‚’ä¿å­˜ã—ã¦åˆ‡ã‚Šæ›¿ãˆå¯èƒ½  
âœ… éå»ã®å±•ç¤ºä¼šãƒ‡ãƒ¼ã‚¿ã‚‚ä¿æŒ

---

### 3. beacon_counts (ãƒ“ãƒ¼ã‚³ãƒ³å—ä¿¡ãƒ‡ãƒ¼ã‚¿)

**ç›®çš„**: æ—¥ä»˜ã”ã¨ã«ãƒ“ãƒ¼ã‚³ãƒ³å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `beacon_counts`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: æ—¥ä»˜æ–‡å­—åˆ— (`"2024-01-15"` å½¢å¼)
- **ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `devices`
  - **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: ãƒ‡ãƒã‚¤ã‚¹å (`"FSC-BP104D"`, `"Booth-A2"` ãªã©)

**ä½¿ç”¨ä¾‹**:
```
beacon_counts/
  â””â”€â”€ 2024-01-15/
      â””â”€â”€ devices/
          â”œâ”€â”€ FSC-BP104D/
          â”‚   â”œâ”€â”€ count: 25
          â”‚   â”œâ”€â”€ deviceName: "FSC-BP104D"
          â”‚   â”œâ”€â”€ visitors: [...]
          â”‚   â””â”€â”€ ...
          â””â”€â”€ Booth-A2/
              â”œâ”€â”€ count: 10
              â””â”€â”€ ...
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `count`: ç´¯è¨ˆè¨ªå•æ•°ï¼ˆ`long_stay`ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„ï¼‰
- `visitors`: æ¥å ´è€…ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—
  - å„æ¥å ´è€…ãƒ‡ãƒ¼ã‚¿ã«ã¯å±æ€§æƒ…å ±ï¼ˆå¹´é½¢ã€æ€§åˆ¥ã€è·æ¥­ãªã©ï¼‰ãŒå«ã¾ã‚Œã‚‹
  - `eventType`: `"visit"`ï¼ˆè¨ªå•ï¼‰ã¾ãŸã¯ `"long_stay"`ï¼ˆé•·æ™‚é–“æ»åœ¨ï¼‰

---

### 4. visitors (æ¥å ´è€…æƒ…å ±)

**ç›®çš„**: æ¥å ´è€…ã®å±æ€§æƒ…å ±ã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `visitors`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID (`"visitor_1755849847010"` ãªã©)

**ä½¿ç”¨ä¾‹**:
```
visitors/
  â””â”€â”€ visitor_1755849847010/
      â”œâ”€â”€ userId: "visitor_1755849847010"
      â”œâ”€â”€ email: "example@email.com"
      â”œâ”€â”€ age: 30
      â”œâ”€â”€ gender: "ç”·æ€§"
      â”œâ”€â”€ job: "ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢"
      â”œâ”€â”€ company: "æ ªå¼ä¼šç¤¾ABC"
      â”œâ”€â”€ position: "èª²é•·"
      â”œâ”€â”€ industry: "ITãƒ»æƒ…å ±é€šä¿¡"
      â”œâ”€â”€ eventSource: "Web"
      â””â”€â”€ interests: ["ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼", "ãƒ“ã‚¸ãƒã‚¹"]
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `userId`: ä¸€æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
- `email`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- `age`, `gender`, `job`, `company`, `position`, `industry`: å€‹äººå±æ€§
- `interests`: èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡ï¼ˆè¤‡æ•°é¸æŠå¯èƒ½ï¼‰

---

### 5. booths (ãƒ–ãƒ¼ã‚¹æƒ…å ±)

**ç›®çš„**: ä¼šå ´å†…ã®ãƒ–ãƒ¼ã‚¹æƒ…å ±ã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `booths`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: ãƒ–ãƒ¼ã‚¹ID (`"FSC-BP104D"`, `"Booth-A2"` ãªã©)

**ä½¿ç”¨ä¾‹**:
```
booths/
  â””â”€â”€ FSC-BP104D/
      â”œâ”€â”€ displayName: "TechInnovate 2024"
      â”œâ”€â”€ company: "æ ªå¼ä¼šç¤¾ãƒ†ãƒƒã‚¯ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³"
      â”œâ”€â”€ description: "AIãƒ»IoTæŠ€è¡“ã§æœªæ¥ã‚’å‰µé€ ..."
      â”œâ”€â”€ products: ["ã‚¹ãƒãƒ¼ãƒˆãƒ“ãƒ¼ã‚³ãƒ³", "AIãƒ­ãƒœãƒƒãƒˆ", ...]
      â”œâ”€â”€ x: 80
      â”œâ”€â”€ y: 150
      â””â”€â”€ type: "booth"
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `displayName`: ãƒ–ãƒ¼ã‚¹ã®è¡¨ç¤ºå
- `company`: å‡ºå±•ä¼æ¥­å
- `x`, `y`: ä¼šå ´å†…ã®åº§æ¨™ï¼ˆãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—è¡¨ç¤ºç”¨ï¼‰
- `type`: ãƒ–ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ— (`"booth"`, `"entrance"`, `"restArea"`, etc.)

---

### 6. booth_reservations (ãƒ–ãƒ¼ã‚¹äºˆç´„)

**ç›®çš„**: æ¥å ´è€…ã®ãƒ–ãƒ¼ã‚¹äºˆç´„æƒ…å ±ã‚’ç®¡ç†

**æ§‹é€ **:
- **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `booth_reservations`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID**: `"{userId}_{boothId}"` (ä¾‹: `"visitor_123_Booth-A2"`)

**ä½¿ç”¨ä¾‹**:
```
booth_reservations/
  â””â”€â”€ visitor_123_Booth-A2/
      â”œâ”€â”€ userId: "visitor_123"
      â”œâ”€â”€ boothId: "Booth-A2"
      â”œâ”€â”€ displayName: "å±±ç”°å¤ªéƒ"
      â”œâ”€â”€ email: "yamada@example.com"
      â””â”€â”€ reservedAt: Timestamp
```

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `userId`: äºˆç´„ã—ãŸæ¥å ´è€…ã®ID
- `boothId`: äºˆç´„ã—ãŸãƒ–ãƒ¼ã‚¹ã®ID
- `reservedAt`: äºˆç´„æ—¥æ™‚

---

### 7. exhibitors, organizers, staff (èªè¨¼ç”¨)

**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æƒ…å ±ã‚’ç®¡ç†

**æ§‹é€ **:
- å„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯èªè¨¼ç”¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ ¼ç´
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¹³æ–‡ã§ä¿å­˜ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯æš—å·åŒ–æ¨å¥¨ï¼‰

**ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `id`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
- `name`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- `password`: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆå¹³æ–‡ï¼‰

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### æ¥å ´è€…ã‚¢ãƒ—ãƒª â†’ Firestore

1. **BLEãƒ“ãƒ¼ã‚³ãƒ³å—ä¿¡æ™‚**:
   ```
   beacon_counts/{date}/devices/{deviceName}
   â”œâ”€â”€ count ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
   â””â”€â”€ visitors[] ã«æ¥å ´è€…ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 
   ```

2. **æ¥å ´è€…æƒ…å ±å…¥åŠ›æ™‚**:
   ```
   visitors/{userId}
   â””â”€â”€ æ¥å ´è€…å±æ€§æƒ…å ±ã‚’ä¿å­˜
   ```

### ã‚¹ã‚¿ãƒƒãƒ•ã‚¢ãƒ—ãƒª â†’ Firestore

1. **çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—**:
   ```
   beacon_counts/{date}/devices/{deviceName}
   â””â”€â”€ count, visitors[] ã‚’å‚ç…§
   ```

2. **ãƒ–ãƒ¼ã‚¹æƒ…å ±å–å¾—**:
   ```
   booths/{boothId}
   â””â”€â”€ ãƒ–ãƒ¼ã‚¹æƒ…å ±ã‚’å‚ç…§
   ```

### ç®¡ç†ç”»é¢ â†’ Firestore

1. **çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å‚ç…§**:
   ```
   beacon_counts/{date}/devices/{deviceName}
   â””â”€â”€ çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§
   ```

2. **æ¥å ´è€…ãƒªã‚¹ãƒˆå–å¾—**:
   ```
   visitors/{userId}
   â””â”€â”€ æ¥å ´è€…å±æ€§æƒ…å ±ã‚’å‚ç…§
   ```

3. **è¦‹è¾¼ã¿å®¢ãƒªã‚¹ãƒˆå–å¾—**:
   ```
   beacon_counts/{date}/devices/{deviceName}
   â””â”€â”€ visitors[] ã‹ã‚‰æ¡ä»¶ã«åˆã†æ¥å ´è€…ã‚’æŠ½å‡º
   ```

---

## ğŸ“ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ã¸ã®è¿½åŠ å†…å®¹

ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ã®Cloud Firestoreéƒ¨åˆ†ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Cloud Firestore                    â”‚
â”‚                                         â”‚
â”‚  ğŸ“ beacon_counts                      â”‚
â”‚    â””â”€â”€ {æ—¥ä»˜}/devices/{ãƒ‡ãƒã‚¤ã‚¹å}      â”‚
â”‚        - count, visitors[], etc.       â”‚
â”‚                                         â”‚
â”‚  ğŸ“ visitors                            â”‚
â”‚    â””â”€â”€ {userId}                        â”‚
â”‚        - email, age, gender, etc.      â”‚
â”‚                                         â”‚
â”‚  ğŸ“ booths                              â”‚
â”‚    â””â”€â”€ {boothId}                       â”‚
â”‚        - displayName, company, etc.    â”‚
â”‚                                         â”‚
â”‚  ğŸ“ booth_reservations                 â”‚
â”‚    â””â”€â”€ {userId}_{boothId}             â”‚
â”‚                                         â”‚
â”‚  ğŸ“ exhibitors, organizers, staff       â”‚
â”‚    (èªè¨¼ç”¨)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

